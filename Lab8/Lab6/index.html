<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/9b40f91bc0.js" crossorigin="anonymous"></script>
    
    <style>
        /* NAVEGATION BAR */

        .navbar-brand {
            margin-left: 20px; 
        }

        .navbar-nav {
            margin-left: auto; /* Push navigation links to the right */
        }

        .navbar-nav a:not(:last-child) {
            margin-right: 20px; 
        }

        .navbar-nav a:last-child {
            margin-right: 30px; 
        }

        .navbar-nav button.nav-link {
            padding: 10px 20px; /* Adjust padding to increase clickable area of cart */
        }


        /* SECTION 1 */

        .section-1{
            padding-top: 60px; 
            padding-bottom: 60px; 
        }

        .section-1 h1, p{
            padding-bottom: 30px;
        }

        .text-justify{
            text-align: justify;
        }


        /* SECTION 2 */

        .small-image {
            width: 300px;
            height: auto; 
            padding-top: 20px; 
            padding-bottom: 40px;
        }

        .card {
            width: 70%; 
            margin: 0 auto; 
        }

        .section-2 h1{
            padding-bottom: 60px;
        }

        .section-2 h2{
            padding-bottom: 10px;
        }

        .section-2{
            padding-top: 80px; 
            padding-bottom: 80px; 
            background-color: #f0f0f0;
        }

        /* SECTION 3 */

        .section-3{
            padding-top: 60px; 
            padding-bottom: 60px; 

        }

        .section-3 h2 {
            padding-right: 40px; 
            padding-left: 40px; 
            padding-bottom: 50px;
        }

        .section-3 h5,p {
            padding-right: 40px; 
            padding-left: 40px; 
        }

        /* FOOTER */

        footer{
            padding-top: 15px;
            padding-bottom: 15px;
            background-color: black;
            color: white;
        }

        footer p{
            padding-top: 40px;
            padding-left: 650px;
        }

        footer h4{
            padding-top: 20px;
        }


        i{
            padding:10px;
        }

        /* CART */

        .cart-container {
            position: absolute; 
            top: 68px; /* Helps place beneath the navigation bar */
            right: 0; 
        }

        .cart-info {
            visibility: hidden; /* Initially hidden */
            background-color: white; 
            color: black; 
            padding: 20px; 
            border: 0.5px solid black; 
        }

        .cart-table td:nth-child(3) {
            text-align: center; /* Center-align the quantity column */
        }

        .cart-table td {
            padding: 8px; /* Add padding to all table cells */
        }

        /* TEXT */

        .italic {
            font-style: italic;
        }

        .fa-regular.fa-eye, .fa-regular.fa-eye-slash{
            color: black;
        }
    </style>



    <title>Blissful Store</title>
</head>
<body>

    <!-- Navegation Bar -->
    <header>
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    <i class="fas fa-leaf fa-1x mx-1"></i> Blissful </a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                  <a class="nav-link" href="#">Course Information</a>
                  <a class="nav-link" href="#">Products</i></a>
                  <!-- Cart button to hide or make visible the cart information -->
                  <button class="nav-link" onclick="toggleCart()"><i class="fas fa-shopping-cart"></i></button>
                </div>
              </div>
            </div>
          </nav>
    </header>

    <main>
        <!-- Home section -->
        <section class = "section-1">
            <div class ="container text-center section-padding">
                <div class ="row">
                    <div class="col-md-7 col-sm-12 align-self-center">
                        <h1>Welcome to Blissful</h1>
                        <p class = "text-justify">
                            We're passionate about helping you embrace a healthier lifestyle with our premium selection of juicers, blender-equipped juicers, and thermos products. Whether you're a health enthusiast or just starting your journey, we have everything you need to fuel your body. 
                            Become a happier, healthier you with Blissful – where wellness meets joy.
                        </p>
                        <p>
                            Ready to take your juicing and smoothie journey to new heights?<br>Our exclusive Juicer + Blender with a Recipe Book Bundle is the perfect companion <br>for anyone looking to unlock a world of delicious and nutritious possibilities.
                        </p>
                        <!-- Add product to cart button -->
                        <a href="#" class="btn btn-dark px-5 py-3 mb-5 purchase-btn" data-product="Juicer + Blender + Book">Buy now for only $869.99 USD</a>
                    </div>
                    <div class="col-md-5 col-sm-12">
                       <img src="images/juicerblenderbook.jpg" alt="Photo Juicer + Blender + Book" class = "small-image" />
                    </div>    
                </div>
            </div>
        </section>

        <!-- Cart Information Container  -->
        <div class="cart-container">
            <div class="cart-info" style="visibility: hidden;">
                <table class="cart-table">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th></th>
                            <th>Quantity</th>
                            <th></th>
                            <th></th>
                            <th>Price</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Here the rows created with JavaScript dinamically will be added -->
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="5">Subtotal</td>
                            <td id="subtotal">0</td>
                        </tr>
                        <tr>
                            <td colspan="5">IVA</td>
                            <td id="iva">0</td>
                        </tr>
                        <tr>
                            <td colspan="5">Total</td>
                            <td id="total">0</td>
                        </tr>
                    </tfoot>
                </table>               
            </div>
        </div>       

        <!-- Product Cards -->
        <section class="section-2"> 
            <div class="container text-center">
                <h1>GET TO KNOW OUR PRODUCTS</h1>
            </div>
            <div class="purchase text-center">
                <div class="price row">
                    <div class="col-md-4 col-12 text-center">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Juicer</h5>
                                <img src="images/juicer.jpg" alt="Photo Juicer" class="small-image" title="Extract the freshest, most nutrient-rich juices from your favorite fruits and vegetables. "/>
                                <div class="pricing">
                                    <h2>$650.99 USD</h2>
                                </div>
                                <!-- Add product to cart button -->
                                <a href="#" class="btn btn-dark px-4 py-2 mb-5 purchase-btn" data-product="Juicer">Purchase Now</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 col-12 text-center">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Juicer + Blender</h5>
                                <img src="images/juicerblender.jpg" alt="Photo Juicer + Blender" class="small-image" title="Take your juicing experience to the next level with our juicers featuring built-in blenders." />
                                <div class="pricing">
                                    <h2>$859.99 USD</h2>
                                </div>
                                <!-- Add product to cart button -->
                                <a href="#" class="btn btn-dark px-4 py-2 mb-5 purchase-btn" data-product="Juicer + Blender">Purchase Now</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 col-12 text-center">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Thermo</h5>
                                <img src="images/thermo.jpg" alt="Photo Thermo" class="small-image" title="Keep your beverages at the perfect temperature. "/>
                                <div class="pricing">
                                    <h2>$20.99 USD</h2>
                                </div>
                                <!-- Add product to cart button -->
                                <a href="#" class="btn btn-dark px-4 py-2 mb-5 purchase-btn" data-product="Thermo">Purchase Now</a>
                            </div>
                        </div>
                    </div>
                </div>
        </section>        

        <!-- Class Questions and Answers -->
        <section class ="section-3"> 
            <h2>Course Information</h2>
            <!-- Text modification using onmouseover and onmouseout -->
            <h5 onmouseover="selectedText(this, 'normal', 'italic')" onmouseout="unselectedText(this)">¿Por qué es una buena práctica usar JavaScript para checar que sean válidos los inputs de las formas antes de enviar los datos al servidor?</h5>
            <p>Respuesta: Usar JavaScript para validar los inputs del formulario antes de enviar los datos al servidor es una buena práctica porque proporciona una experiencia de usuario más fluida y receptiva. Esto permite que los usuarios reciban retroalimentación inmediata sobre cualquier error en sus entradas, lo que les ayuda a corregirlos de inmediato sin tener que esperar la respuesta del servidor. Además, reduce la carga en el servidor al evitar que se procesen datos incorrectos o incompletos.</p>
        
            <h5 onmouseover="selectedText(this, 'normal', 'italic')" onmouseout="unselectedText(this)">¿Cómo puedes saltarte la seguridad de validaciones hechas con JavaScript?</h5>
            <p>Respuesta: Es posible saltarse la seguridad de las validaciones hechas con JavaScript mediante técnicas como la manipulación del DOM, la desactivación del JavaScript en el navegador o el envío directo de datos al servidor sin pasar por la validación del cliente. Los usuarios malintencionados pueden modificar el código JavaScript en el lado del cliente para evitar o eludir las validaciones del formulario, lo que podría permitirles enviar datos maliciosos o incorrectos al servidor.</p>
        
            <h5 onmouseover="selectedText(this, 'normal', 'italic')" onmouseout="unselectedText(this)">Si te puedes saltar la seguridad de las validaciones de JavaScript, entonces ¿por qué la primera pregunta dice que es una buena práctica?</h5>
            <p>Respuesta: Aunque es posible eludir las validaciones de JavaScript, seguir utilizando JavaScript para validar los inputs del formulario sigue siendo una buena práctica por varias razones. En primer lugar, proporciona una capa adicional de validación en el lado del cliente, lo que mejora la experiencia del usuario al ofrecer retroalimentación instantánea. Además, puede ayudar a prevenir errores simples o accidentales antes de que los datos se envíen al servidor. Aunque no es una solución completa para garantizar la seguridad de los datos, la validación del lado del cliente sigue siendo una herramienta valiosa en la caja de herramientas del desarrollador para mejorar la usabilidad y la eficiencia del formulario.</p>
        </section>
        
    </main>

    <!-- Footer Information -->
    <footer>
        <div class="container-fluid p-0">
            <div class="row">
                <div class="col-md-8 col-md-5">
                    <p>
                        &copy 2024 Blissful Co.
                    </p>
                </div>
                <div class="col-md-4">
                    <h4 class="text-center">Follow us</h4>
                    <div class="column d-flex justify-content-center">
                        <i class="fab fa-facebook-f"></i>
                        <i class="fab fa-instagram"></i>
                        <i class="fab fa-youtube"></i>

                    </div>
                </div>
            </div>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script> 
    <script>
        // SHOPPING CART VISIBILITY 
        function toggleCart() {
            var cartInfo = document.querySelector('.cart-info');
            if (cartInfo.style.visibility == 'hidden') {
                cartInfo.style.visibility = 'visible';
            } else {
                cartInfo.style.visibility = 'hidden';
            }  
        }

        //ADDING PRODUCTS TO CART 

        // Capture all "Purchase Now" bottons 
        const purchaseButtons = document.querySelectorAll('.purchase-btn');

        // Iterating over each button and adding an event listener (click)
        purchaseButtons.forEach(button => {
            button.addEventListener('click', addToCart);
        });

        function addToCart(event) {
            // Avoid predetermined link to activate
            event.preventDefault();

            // Extract product information and set price 
            let productName, productPrice;

            if (event.target.dataset.product === "Juicer + Blender + Book") {
                productName = "Juicer + Blender + Book";
                productPrice = 869.99;
            } else if (event.target.dataset.product === "Juicer") {
                productName = "Juicer";
                productPrice = 650.99; 
            } else if (event.target.dataset.product === "Juicer + Blender") {
                productName = "Juicer + Blender";
                productPrice = 859.99; 
            } else if (event.target.dataset.product === "Thermo") {
                productName = "Thermo";
                productPrice = 20.99; 
            }


            // Verify if the product is already in the shopping cart 
            const cartItems = document.querySelectorAll('.cart-table tbody tr td:first-child');
            for (let item of cartItems) {
                if (item.innerText === productName) {
                    alert('This product is already in the cart!');
                    return; 
                }
            }

            // Create a new row to add product with specifications to the cart 
            const cartRow = document.createElement('tr');
            cartRow.innerHTML = `
                <td>${productName}</td>
                <td><button class="btn btn-sm btn-danger">-</button></td>
                <td>1</td>
                <td><button class="btn btn-sm btn-success">+</button></td>
                <td><button class="btn btn-sm btn-danger">Remove</button></td>
                <td class="price">$${productPrice.toFixed(2)}</td>
            `;

            // Add the new created row to the cart table 
            const cartTable = document.querySelector('.cart-table tbody');
            cartTable.appendChild(cartRow);

            // Update total price 
            updateTotal();
        }


        // PRICE

        // Function to update total price 
        function updateTotal() {
            let subtotal = 0;

            // Iterate over each cart row 
            const rows = document.querySelectorAll('.cart-table tbody tr');
            rows.forEach(row => {
                // Get the quantity and price for the product and turn it to int 
                const quantity = parseInt(row.children[2].textContent);
                const price = parseFloat(row.children[5].textContent.substring(1));

                // Calculate by product on each iteration to get the final subtotal
                subtotal += quantity * price;
            });

            // Update price elements 
            const subtotalElement = document.getElementById('subtotal');
            subtotalElement.textContent = '$' + subtotal.toFixed(2);

            const ivaElement = document.getElementById('iva');
            const iva = subtotal * 0.16; 
            ivaElement.textContent = '$' + iva.toFixed(2);

            const totalElement = document.getElementById('total');
            const total = subtotal + iva;
            totalElement.textContent = '$' + total.toFixed(2);
        }


        // ADD REMOVE DELETE ITEMS FROM CART 

        // Add event listeners to the document for click events on buttons with specific classes
        document.addEventListener('click', function(event) {
            // Check if the clicked element is an add button
            if (event.target.classList.contains('btn-success')) {
                // Call the function to add product to the cart
                incrementQuantity(event.target);
            }
            // Check if the clicked element is a remove button
            else if (event.target.classList.contains('btn-danger') && event.target.innerText === '-') {
                // Call the function to handle removing product from the cart
                decrementQuantity(event.target);
            }
            // Check if the clicked element is a delete button
            else if (event.target.classList.contains('btn-danger') && event.target.innerText === 'Remove') {
                // Call the function to handle deleting product from the cart
                removeFromCart(event.target);
            }
        });

        // Function to increment the quantity of a product in the cart
        function incrementQuantity(button) {
            // Get the quantity element for the product by going one column backward
            const quantityElement = button.parentElement.previousElementSibling;
            // Get the current quantity value
            let quantity = parseInt(quantityElement.textContent);
            // Check if the quantity is already at the limit (10)
            if (quantity >= 10) {
                // If the product limit is reached, show an alert 
                alert("You can't add more than 10 items for each product.");
                return;
            }
            // Increment the quantity
            quantityElement.textContent = quantity + 1;
            // Update the total price
            updateTotal();
        }

        // Function to decrement the quantity of a product in the cart
        function decrementQuantity(button) {
            // Get the quantity element for the product by going one column forward
            const quantityElement = button.parentElement.nextElementSibling;
            // Get the current quantity value
            const quantity = parseInt(quantityElement.textContent);
            // Decrement the quantity if it's greater than 1
            if (quantity > 1) {
                quantityElement.textContent = quantity - 1;
            }
            // Update the total price
            updateTotal();
        }

        // Function to remove a product from the cart
        function removeFromCart(button) {
            // Get the quantity element for the product by going two columns backward
            const row = button.parentElement.parentElement;
            // Remove the row from the table
            row.remove();
            // Update the total price
            updateTotal();
        }


        // CHANGE TEXT STYLE 

        function selectedText(element, fontWeight, fontStyle) {
            element.style.fontWeight = fontWeight;
            element.style.fontStyle = fontStyle;
        }

        function unselectedText(element) {
            element.style.fontWeight = 'normal';
            element.style.fontStyle = 'normal';
        }

        // COMPLEMENTARY INFORMATION

        // Capture all product images from product section 
        const productImages = document.querySelectorAll('.product-image');

        // Add events to show additional info in title when mouse is over 
        productImages.forEach(image => {
            image.addEventListener('mouseover', () => {
                const info = image.getAttribute('title');
            });

            // Hide information when user stops interacting with image 
            image.addEventListener('mouseout', () => {
            });
        });

    </script>
</body>
</html>